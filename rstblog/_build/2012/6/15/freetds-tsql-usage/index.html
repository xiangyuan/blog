<!doctype html>
<html lang="en">
    <head>
        <title>Using tsql</title>

        <!-- meta -->
        <meta name="author" content="Danilo Bargen">
        <meta name="dc.language" content="en-US">
        <meta name="dc.license" content="http://creativecommons.org/licenses/by-sa/3.0/">
        <meta name="description" content="How to use the tsql command.">
        <meta name="keywords" content="databases, sysadmin">
        
            <meta name="dc.date.created" content="2012-06-15">
            <meta name="dc.date.issued" content="2012-06-15">
        
        <meta name="google-site-verification" content="uJWWR6d5ESb8torD0v97T_07HLMGX7VzQ-smcUTc_IQ" />

        <!-- favicon -->
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- newsfeed -->
        <link href="/feed.atom" rel="alternate" title="Feed" type="application/atom+xml">

        <!-- assets -->
        <link href="https://fonts.googleapis.com/css?family=Linden+Hill:400,400italic" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="/static/style.css?1371592067" type="text/css">
            <link rel="stylesheet" href="/static/_pygments.css?1371592069" type="text/css">
    </head>
    <body>
        <div id="wrapper">
            <div id="blogtitle"><a href="/">blog.dbrgn.ch</a></div>
            <ul id="mainnav">
                <li><a href="/">home</a></li>
                <li><a href="/archive/">archive</a></li>
                <li><a href="/tags/">tags</a></li>
                <li><a href="/blog/">about this blog</a></li>
                <li class="last"><a href="/about/">about me</a></li>
            </ul>

            <div class="clearboth"></div>

            <div id="content" class="hyphenate">
                
  <h1 class="title">Using tsql</h1>

  
    <div class="date">
      <p>written on Friday, June 15, 2012</p>
    </div>
  

  <p>Today I had to connect to a MSSQL database from a Linux box. A library to do this is <a class="reference external" href="http://www.freetds.org/">FreeTDS</a>. It also provides an interactive <tt class="docutils literal">tsql</tt> command. Install it from your
distro repositories or compile it by hand.</p>
<p>Unfortunately the command provides no <tt class="docutils literal"><span class="pre">--help</span></tt> or <tt class="docutils literal"><span class="pre">-h</span></tt> option, but there are manpages. Here are
some of the relevant options:</p>
<div class="highlight"><pre>-H hostname
      the DNS hostname of the server

-p port
      the port at which SQL Server is listening

-U username
      database login name. If username is not provided, a domain login is attempted for TDS 7+ connections.

-P password
      database password.
</pre></div>
<p>After successfully connecting to a database server, there was another issue for me. The SQL queries
were not submitted simply by ending them with a semicolon, unlike the <tt class="docutils literal">mysql</tt> and <tt class="docutils literal">psql</tt>
tools. It took me a while to figure out that the keyword to submit a query was <tt class="docutils literal">go</tt>...</p>
<div class="highlight"><pre>$ tsql -H host -p 1433 -U username -P passwd
locale is &quot;en_US.UTF-8&quot;
locale charset is &quot;UTF-8&quot;
using default charset &quot;UTF-8&quot;
1&gt; use MyDatabase
2&gt; go
1&gt; EXEC sp_tables &quot;Security%&quot;
2&gt; go
TABLE_QUALIFIER TABLE_OWNER     TABLE_NAME      TABLE_TYPE      REMARKS
mdPROJECTTIMER  dbo     SecurityLanguages       TABLE   NULL
mdPROJECTTIMER  dbo     SecurityRightGroups     TABLE   NULL
mdPROJECTTIMER  dbo     SecurityRightGroupTranslations  TABLE   NULL
mdPROJECTTIMER  dbo     SecurityRights  TABLE   NULL
mdPROJECTTIMER  dbo     SecurityRights2UserGroups       TABLE   NULL
mdPROJECTTIMER  dbo     SecurityRightTranslations       TABLE   NULL
mdPROJECTTIMER  dbo     SecurityUserGroups      TABLE   NULL
mdPROJECTTIMER  dbo     SecurityUserGroups2Users        TABLE   NULL
mdPROJECTTIMER  dbo     SecurityUsers   TABLE   NULL
mdPROJECTTIMER  dbo     SecurityVersion TABLE   NULL
(10 rows affected)
(return status = 0)
</pre></div>


  
      <a href="https://flattr.com/submit/auto?user_id=danilo&url=http://blog.dbrgn.ch/2012/6/15/freetds-tsql-usage/&title=Using%20tsql&description=How%20to%20use%20the%20tsql%20command.&tags=databases%2C%20sysadmin&category=text">
           <img class="flattrbutton" src="/static/img/flattr-badge-large.png" alt="Flattr this!" /> 
      </a>
  

  
    <div class="tags">
      <p>This entry was tagged
      
        <a href="/tags/databases/">databases</a> and 
        <a href="/tags/sysadmin/">sysadmin</a></p>
    </div>
  

  
    
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dbrgn'; // required: replace example with your forum shortname
    
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  

            </div>
        </div>

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-1033934-12']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
        <script type="text/javascript" src="/static/hyphenator.js"></script>
        <script type="text/javascript">
            Hyphenator.config({
                donthyphenateclassname : 'docutils literal'
            });
            Hyphenator.run();
        </script>

    </body>
</html>

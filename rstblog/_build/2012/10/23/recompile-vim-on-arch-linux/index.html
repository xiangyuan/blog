<!doctype html>
<html lang="en">
    <head>
        <title>Recompile Vim with Python/Ruby Support on Arch Linux</title>

        <!-- meta -->
        <meta name="author" content="Danilo Bargen">
        <meta name="dc.language" content="en-US">
        <meta name="dc.license" content="http://creativecommons.org/licenses/by-sa/3.0/">
        <meta name="description" content="Recompile Vim with Python and Ruby support under Arch Linux.">
        <meta name="keywords" content="archlinux, python, ruby, vim">
        
            <meta name="dc.date.created" content="2012-10-23">
            <meta name="dc.date.issued" content="2012-10-23">
        
        <meta name="google-site-verification" content="uJWWR6d5ESb8torD0v97T_07HLMGX7VzQ-smcUTc_IQ" />

        <!-- favicon -->
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- newsfeed -->
        <link href="/feed.atom" rel="alternate" title="Feed" type="application/atom+xml">

        <!-- assets -->
        <link href="https://fonts.googleapis.com/css?family=Linden+Hill:400,400italic" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="/static/style.css?1371592067" type="text/css">
            <link rel="stylesheet" href="/static/_pygments.css?1371592069" type="text/css">
    </head>
    <body>
        <div id="wrapper">
            <div id="blogtitle"><a href="/">blog.dbrgn.ch</a></div>
            <ul id="mainnav">
                <li><a href="/">home</a></li>
                <li><a href="/archive/">archive</a></li>
                <li><a href="/tags/">tags</a></li>
                <li><a href="/blog/">about this blog</a></li>
                <li class="last"><a href="/about/">about me</a></li>
            </ul>

            <div class="clearboth"></div>

            <div id="content" class="hyphenate">
                
  <h1 class="title">Recompile Vim with Python/Ruby Support on Arch Linux</h1>

  
    <div class="date">
      <p>written on Tuesday, October 23, 2012</p>
    </div>
  

  <p>For my <a class="reference external" href="https://github.com/dbrgn/dotfiles">vim configuration</a>, I need a
version of Vim that was built with Python and Ruby support. Unfortunately, the
default version of Vim that is installed with <cite>pacman</cite> doesn't support
Python/Ruby.</p>
<p>The easiest way to solve this problem is to install the <cite>gvim</cite> package instead
of <cite>vim</cite> (don't worry, the <cite>gvim</cite> package also includes a <cite>vim</cite> binary). But
this brings along a huge amount of dependencies that I didn't want on my
system, so there's no way around a package recompilation.</p>
<p>To ease the reconfiguration-process I found <a class="reference external" href="https://wiki.archlinux.org/index.php/Pacbuilder">pacbuilder</a>, a script to easily
recompile single packages or even the whole system. Install it using yaourt (or
manually if you prefer):</p>
<pre class="literal-block">
$ yaourt -S pacbuilder-svn
</pre>
<p>Then rebuild the <cite>vim</cite> and <cite>vim-runtime</cite> packages with the <cite>--edit</cite> option:</p>
<pre class="literal-block">
$ pacbuilder --install --edit vim vim-runtime
</pre>
<p>When the script asks you whether you want to edit the <cite>PKGBUILD</cite> file, answer
with <cite>y</cite>. Then find the first line that looks like this:</p>
<pre class="literal-block">
./configure --prefix=/usr --localstatedir=/var/lib/vim \
  --with-features=big --with-compiledby=ArchLinux \
  --enable-gpm --enable-acl --with-x=no \
  --disable-gui --enable-multibyte --enable-cscope \
  --disable-netbeans --enable-perlinterp --disable-pythoninterp \
  --disable-python3interp --disable-rubyinterp --disable-luainterp
</pre>
<p>Edit the configure options to your likings. In my case, I changed the following
things:</p>
<ul class="simple">
<li><cite>--disable-pythoninterp</cite> ⇒ <cite>--enable-pythoninterp</cite></li>
<li><cite>--disable-python3interp</cite> ⇒ <cite>--enable-python3interp</cite></li>
<li><cite>--disable-rubyinterp</cite> ⇒ <cite>--enable-rubyinterp</cite></li>
<li><cite>--with-compiledby=ArchLinux</cite> ⇒ <cite>--with-compiledby=&quot;Custom Build (http://s.dbrgn.ch/uqK6)&quot;</cite></li>
</ul>
<p>Also add <cite>python</cite>, <cite>python2</cite> and <cite>ruby</cite> to the <cite>depends</cite> list inside the
<cite>package_vim()</cite> function. Then save and close the <cite>PKGBUILD</cite> file.</p>
<p>Pacbuilder will now go on to compile and install your custom build of Vim. You
can verify it with <tt class="docutils literal">vim <span class="pre">--version</span></tt> on the commandline.</p>
<p>Afterwards, if you want to prevent <cite>pacman</cite> from auto-upgrading your <cite>vim</cite>
package, you can add <cite>vim</cite> and <cite>vim-runtime</cite> to the <cite>IgnorePkg</cite> variable in
<cite>/etc/pacman.conf</cite>.</p>


  
      <a href="https://flattr.com/submit/auto?user_id=danilo&url=http://blog.dbrgn.ch/2012/10/23/recompile-vim-on-arch-linux/&title=Recompile%20Vim%20with%20Python/Ruby%20Support%20on%20Arch%20Linux&description=Recompile%20Vim%20with%20Python%20and%20Ruby%20support%20under%20Arch%20Linux.&tags=archlinux%2C%20python%2C%20ruby%2C%20vim&category=text">
           <img class="flattrbutton" src="/static/img/flattr-badge-large.png" alt="Flattr this!" /> 
      </a>
  

  
    <div class="tags">
      <p>This entry was tagged
      
        <a href="/tags/archlinux/">archlinux</a>, 
        <a href="/tags/python/">python</a>, 
        <a href="/tags/ruby/">ruby</a> and 
        <a href="/tags/vim/">vim</a></p>
    </div>
  

  
    
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dbrgn'; // required: replace example with your forum shortname
    
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  

            </div>
        </div>

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-1033934-12']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
        <script type="text/javascript" src="/static/hyphenator.js"></script>
        <script type="text/javascript">
            Hyphenator.config({
                donthyphenateclassname : 'docutils literal'
            });
            Hyphenator.run();
        </script>

    </body>
</html>

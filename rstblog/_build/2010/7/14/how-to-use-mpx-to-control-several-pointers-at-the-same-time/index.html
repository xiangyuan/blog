<!doctype html>
<html lang="en">
    <head>
        <title>tutorial: How to use MPX to control several mouse pointers at the same time</title>

        <!-- meta -->
        <meta name="author" content="Danilo Bargen">
        <meta name="dc.language" content="en-US">
        <meta name="dc.license" content="http://creativecommons.org/licenses/by-sa/3.0/">
        
        <meta name="keywords" content="linux">
        
            <meta name="dc.date.created" content="2010-07-14">
            <meta name="dc.date.issued" content="2010-07-14">
        
        <meta name="google-site-verification" content="uJWWR6d5ESb8torD0v97T_07HLMGX7VzQ-smcUTc_IQ" />

        <!-- favicon -->
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- newsfeed -->
        <link href="/feed.atom" rel="alternate" title="Feed" type="application/atom+xml">

        <!-- assets -->
        <link href="https://fonts.googleapis.com/css?family=Linden+Hill:400,400italic" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="/static/style.css?1371592067" type="text/css">
            <link rel="stylesheet" href="/static/_pygments.css?1371592069" type="text/css">
    </head>
    <body>
        <div id="wrapper">
            <div id="blogtitle"><a href="/">blog.dbrgn.ch</a></div>
            <ul id="mainnav">
                <li><a href="/">home</a></li>
                <li><a href="/archive/">archive</a></li>
                <li><a href="/tags/">tags</a></li>
                <li><a href="/blog/">about this blog</a></li>
                <li class="last"><a href="/about/">about me</a></li>
            </ul>

            <div class="clearboth"></div>

            <div id="content" class="hyphenate">
                
  <h1 class="title">tutorial: How to use MPX to control several mouse pointers at the same time</h1>

  
    <div class="date">
      <p>written on Wednesday, July 14, 2010</p>
    </div>
  

  <p>The <a class="reference external" href="http://www.x.org/wiki/Development/Documentation/MPX">MPX project</a> is a Xorg extension to
allow several mouse pointers and keyboards in an X session to be used at the same time. This is
especially useful when using touch-sensitive screens (multitouch).</p>
<p>Watch the following Youtube video to see a demo:</p>
<iframe src="http://www.youtube.com/embed/0MUOn_nJmRA"     width="500" height="281" frameborder="0"     webkitAllowFullScreen mozallowfullscreen allowfullscreen     class="align-none"></iframe><p>In the Xorg version shipped with a current installation of Ubuntu, this extension is already
included. This how-to will show you how to control two pointers and keyboards at the same time with
the &quot;xinput&quot; tool.</p>
<p>First, call the xinput tool to list all available devices.</p>
<div class="highlight"><pre><span class="nv">$ </span>xinput list
⎡ Virtual core pointer                      <span class="nv">id</span><span class="o">=</span>2    <span class="o">[</span>master pointer  <span class="o">(</span>3<span class="o">)]</span>
⎜   ↳ Virtual core XTEST pointer                <span class="nv">id</span><span class="o">=</span>4    <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ Tangtop Generic USBPS2                    <span class="nv">id</span><span class="o">=</span>14   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ SynPS/2 Synaptics TouchPad                <span class="nv">id</span><span class="o">=</span>16   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ Macintosh mouse button emulation          <span class="nv">id</span><span class="o">=</span>17   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ PS/2 Generic Mouse                        <span class="nv">id</span><span class="o">=</span>18   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎣ Virtual core keyboard                     <span class="nv">id</span><span class="o">=</span>3    <span class="o">[</span>master keyboard <span class="o">(</span>2<span class="o">)]</span>
    ↳ Virtual core XTEST keyboard               <span class="nv">id</span><span class="o">=</span>5    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span>6    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Fujitsu FUJ02E3                           <span class="nv">id</span><span class="o">=</span>7    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Video Bus                                 <span class="nv">id</span><span class="o">=</span>8    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Fujitsu FUJ02B1                           <span class="nv">id</span><span class="o">=</span>9    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span>10   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Sleep Button                              <span class="nv">id</span><span class="o">=</span>11   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Tangtop Generic USBPS2                    <span class="nv">id</span><span class="o">=</span>13   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ AT Translated Set 2 keyboard              <span class="nv">id</span><span class="o">=</span>15   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ USB Audio                                 <span class="nv">id</span><span class="o">=</span>12   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
</pre></div>
<p>In my case, I want to use the following four devices:</p>
<ul class="simple">
<li>Internal mouse: SynPS/2 Synaptics TouchPad (id=16)</li>
<li>Internal keyboard: AT Translated Set 2 keyboard (id=15)</li>
<li>External mouse: Tangtop Generic USBPS2 (id=14)</li>
<li>External keyboard: Tangtop Generic USBPS2 (id=13)</li>
</ul>
<p>Now, create a new master.</p>
<div class="highlight"><pre><span class="nv">$ </span>xinput create-master secondary
</pre></div>
<p>You may hve noticed now that a second mouse pointer appears. This is because a new master called
&quot;secondary&quot; has been created. Issue &quot;xinput list&quot; to see the new entries.</p>
<div class="highlight"><pre>⎡ secondary pointer                        <span class="nv">id</span><span class="o">=</span>19   <span class="o">[</span>master pointer  <span class="o">(</span>20<span class="o">)]</span>
⎜   ↳ secondary XTEST pointer                   <span class="nv">id</span><span class="o">=</span>21   <span class="o">[</span>slave  pointer  <span class="o">(</span>19<span class="o">)]</span>
⎣ secondary keyboard                        <span class="nv">id</span><span class="o">=</span>20   <span class="o">[</span>master keyboard <span class="o">(</span>19<span class="o">)]</span>
    ↳ secondary XTEST keyboard                  <span class="nv">id</span><span class="o">=</span>22   <span class="o">[</span>slave  keyboard <span class="o">(</span>20<span class="o">)]</span>
</pre></div>
<p>The next step is to reattach my two external input devices to the newly created master.</p>
<div class="highlight"><pre><span class="nv">$ </span>xinput reattach 14 19
<span class="nv">$ </span>xinput reattach 13 20
</pre></div>
<p>This will attach the pointer with the id 14 to the secondary pointer master with the id 19, and the
keyboard with the id 13 to the keyboard master with the id 19.</p>
<p>Done! The device list now looks like this:</p>
<div class="highlight"><pre><span class="nv">$ </span>xinput list
⎡ Virtual core pointer                      <span class="nv">id</span><span class="o">=</span>2    <span class="o">[</span>master pointer  <span class="o">(</span>3<span class="o">)]</span>
⎜   ↳ Virtual core XTEST pointer                <span class="nv">id</span><span class="o">=</span>4    <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ SynPS/2 Synaptics TouchPad                <span class="nv">id</span><span class="o">=</span>16   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ Macintosh mouse button emulation          <span class="nv">id</span><span class="o">=</span>17   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎜   ↳ PS/2 Generic Mouse                        <span class="nv">id</span><span class="o">=</span>18   <span class="o">[</span>slave  pointer  <span class="o">(</span>2<span class="o">)]</span>
⎣ Virtual core keyboard                     <span class="nv">id</span><span class="o">=</span>3    <span class="o">[</span>master keyboard <span class="o">(</span>2<span class="o">)]</span>
    ↳ Virtual core XTEST keyboard               <span class="nv">id</span><span class="o">=</span>5    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span>6    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Fujitsu FUJ02E3                           <span class="nv">id</span><span class="o">=</span>7    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Video Bus                                 <span class="nv">id</span><span class="o">=</span>8    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Fujitsu FUJ02B1                           <span class="nv">id</span><span class="o">=</span>9    <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span>10   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ Sleep Button                              <span class="nv">id</span><span class="o">=</span>11   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ AT Translated Set 2 keyboard              <span class="nv">id</span><span class="o">=</span>15   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
    ↳ USB Audio                                 <span class="nv">id</span><span class="o">=</span>12   <span class="o">[</span>slave  keyboard <span class="o">(</span>3<span class="o">)]</span>
⎡ secondary pointer                         <span class="nv">id</span><span class="o">=</span>19   <span class="o">[</span>master pointer  <span class="o">(</span>20<span class="o">)]</span>
⎜   ↳ Tangtop Generic USBPS2                    <span class="nv">id</span><span class="o">=</span>14   <span class="o">[</span>slave  pointer  <span class="o">(</span>19<span class="o">)]</span>
⎜   ↳ secondary XTEST pointer                   <span class="nv">id</span><span class="o">=</span>21   <span class="o">[</span>slave  pointer  <span class="o">(</span>19<span class="o">)]</span>
⎣ secondary keyboard                        <span class="nv">id</span><span class="o">=</span>20   <span class="o">[</span>master keyboard <span class="o">(</span>19<span class="o">)]</span>
    ↳ Tangtop Generic USBPS2                    <span class="nv">id</span><span class="o">=</span>13   <span class="o">[</span>slave  keyboard <span class="o">(</span>20<span class="o">)]</span>
    ↳ secondary XTEST keyboard                  <span class="nv">id</span><span class="o">=</span>22   <span class="o">[</span>slave  keyboard <span class="o">(</span>20<span class="o">)]</span>
</pre></div>
<p>Now someone can work in one window using the first keyboard, and another person can work in a second
window with another keyboard at the same time! Unfortunately I am not able to make a screenshot of
this, as the printscreen utility seems to capture only the first pointer.</p>
<p><strong>Notes:</strong> There are still a few things that are not very clear to me, e.g. with the second mouse
pointer i can't move any windows (even though i can focus them). Probably Xorg does not give the
second pointer those permissions. Or maybe it has to do with the window manager. I haven't taken a
very deep look into these things yet, so I can't tell you, but I will when I know more :)</p>
<p><strong>PS:</strong> In case you want to remove the newly created pointers, issue the following commands:</p>
<div class="highlight"><pre><span class="nv">$ </span>xinput reattach 14 2
<span class="nv">$ </span>xinput reattach 13 3
<span class="nv">$ </span>xinput remove-master 19
</pre></div>


  
      <a href="https://flattr.com/submit/auto?user_id=danilo&url=http://blog.dbrgn.ch/2010/7/14/how-to-use-mpx-to-control-several-pointers-at-the-same-time/&title=tutorial%3A%20How%20to%20use%20MPX%20to%20control%20several%20mouse%20pointers%20at%20the%20same%20time&description=None&tags=linux&category=text">
           <img class="flattrbutton" src="/static/img/flattr-badge-large.png" alt="Flattr this!" /> 
      </a>
  

  
    <div class="tags">
      <p>This entry was tagged
      
        <a href="/tags/linux/">linux</a></p>
    </div>
  

  
    
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dbrgn'; // required: replace example with your forum shortname
    
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  

            </div>
        </div>

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-1033934-12']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
        <script type="text/javascript" src="/static/hyphenator.js"></script>
        <script type="text/javascript">
            Hyphenator.config({
                donthyphenateclassname : 'docutils literal'
            });
            Hyphenator.run();
        </script>

    </body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="text">Recent Blog Posts</title>
  <id>http://blog.dbrgn.ch/feed.atom</id>
  <updated>2012-12-07T00:00:00Z</updated>
  <link href="http://blog.dbrgn.ch/" />
  <link href="http://blog.dbrgn.ch/feed.atom" rel="self" />
  <subtitle type="text">Recent blog posts</subtitle>
  <generator>Werkzeug</generator>
  <entry xml:base="http://blog.dbrgn.ch/feed.atom">
    <title type="text">dwm config - volume, battery notification, unread e-mail count &amp; more</title>
    <id>http://blog.dbrgn.ch/2012/1/19/dwm-config-volume-battery-notification-unread-e-mail-count-more</id>
    <updated>2012-01-19T00:00:00Z</updated>
    <link href="http://blog.dbrgn.ch/2012/1/19/dwm-config-volume-battery-notification-unread-e-mail-count-more" />
    <author>
      <name>Danilo Bargen</name>
    </author>
    <content type="html">&lt;p&gt;As many other &lt;a class="reference external" href="http://dwm.suckless.org/"&gt;dwm&lt;/a&gt; users do, I customized my
&lt;cite&gt;.xinitrc&lt;/cite&gt; file and the dwm status bar in to display some useful information.
Here is my configuration:&lt;/p&gt;
&lt;div class="section" id="xinitrc"&gt;
&lt;h2&gt;.xinitrc&lt;/h2&gt;
&lt;p&gt;This is what my .xinitrc looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# set keyboard layout to Swiss German&lt;/span&gt;
setxkbmap ch

&lt;span class="c"&gt;# Load .Xresources file&lt;/span&gt;
xrdb -merge ~/.Xresources

&lt;span class="c"&gt;# Start xbindkeys&lt;/span&gt;
xbindkeys &amp;amp;

&lt;span class="c"&gt;# Set some defaults&lt;/span&gt;
&lt;span class="nb"&gt;export &lt;/span&gt;&lt;span class="nv"&gt;BROWSER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;chromium &amp;amp;
&lt;span class="nb"&gt;export &lt;/span&gt;&lt;span class="nv"&gt;EDITOR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;vim &amp;amp;
xdg-mime default evince.desktop application/pdf &amp;amp;

&lt;span class="c"&gt;# Loop&lt;/span&gt;
&lt;span class="k"&gt;while &lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="c"&gt;# Set root title&lt;/span&gt;
    sh .xsetroot.sh

    &lt;span class="c"&gt;# Check battery level&lt;/span&gt;
    &lt;span class="nv"&gt;BATT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt; acpi -b | sed &lt;span class="s1"&gt;&amp;#39;s/.*[charging|unknown], \([0-9]*\)%.*/\1/gi&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;)&lt;/span&gt;
    &lt;span class="nv"&gt;STATUS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt; acpi -b | sed &lt;span class="s1"&gt;&amp;#39;s/.*: \([a-zA-Z]*\),.*/\1/gi&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;([&lt;/span&gt; &lt;span class="nv"&gt;$BATT&lt;/span&gt; -le 5 &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$STATUS&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Discharging&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;])&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="c"&gt;# Beep&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\007&amp;quot;&lt;/span&gt; &amp;gt;/dev/tty10 &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sleep 0.2
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\007&amp;quot;&lt;/span&gt; &amp;gt;/dev/tty10 &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sleep 0.2
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\007&amp;quot;&lt;/span&gt; &amp;gt;/dev/tty10 &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sleep 0.2
        &lt;span class="c"&gt;# Blink&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;on&amp;#39;&lt;/span&gt; &amp;gt; /proc/acpi/ibm/light &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sleep 1
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt; &amp;gt; /proc/acpi/ibm/light
    &lt;span class="k"&gt;fi&lt;/span&gt;

    &lt;span class="c"&gt;# Update every 10s&lt;/span&gt;
    sleep 10s
&lt;span class="k"&gt;done&lt;/span&gt; &amp;amp;

&lt;span class="c"&gt;# Set up rotated dual screen without touching my xorg.conf&lt;/span&gt;
xrandr --output DVI-1 --auto --rotate left --pos 0x0 --output DVI-0 --auto --pos 1080x720 --rotate normal

&lt;span class="c"&gt;# Read .xsessionrc&lt;/span&gt;
sh ~/.xsessionrc &amp;amp;

&lt;span class="c"&gt;# Set wallpaper&lt;/span&gt;
feh --bg-scale ~/.xwallpaper-dwm.png

&lt;span class="c"&gt;# Set WM name (for Java apps)&lt;/span&gt;
wmname LG3D

&lt;span class="c"&gt;# Run dwm&lt;/span&gt;
&lt;span class="nb"&gt;exec &lt;/span&gt;dwm
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="xresources"&gt;
&lt;h2&gt;.Xresources&lt;/h2&gt;
&lt;p&gt;In my &lt;cite&gt;.Xresources&lt;/cite&gt;, I'm setting the UXTerm color to white on black, as well as
fixing a bug with the &lt;tt class="docutils literal"&gt;Alt&lt;/tt&gt; key in SSH sessions. The last line is to set the
window URGENT flag when the window uses the system bell.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;UXTerm*eightBitInput: &lt;span class="nb"&gt;false&lt;/span&gt;
UXTerm*metaSendsEscape: &lt;span class="nb"&gt;true&lt;/span&gt;
UXTerm*reverseVideo: &lt;span class="nb"&gt;true&lt;/span&gt;
UXTerm*bellIsUrgent: &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="xsetroot-sh"&gt;
&lt;h2&gt;.xsetroot.sh&lt;/h2&gt;
&lt;p&gt;As you've seen in my &lt;cite&gt;.xinitrc&lt;/cite&gt; file, I didn't want to keep my xsetroot commands
directly in that file. The main reason for this is that now I can update the
status information from an external script, e.g. when pushing some volume
buttons on my notebook.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;DATETIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;date&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;UPTIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;uptime | sed &lt;span class="s1"&gt;&amp;#39;s/.*up\s*//&amp;#39;&lt;/span&gt; | sed &lt;span class="s1"&gt;&amp;#39;s/,\s*[0-9]* user.*//&amp;#39;&lt;/span&gt; | sed &lt;span class="s1"&gt;&amp;#39;s/  / /g&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;VOLUME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt; amixer sget Master | grep -e &lt;span class="s1"&gt;&amp;#39;Front Left:&amp;#39;&lt;/span&gt; | &lt;span class="se"&gt;\&lt;/span&gt;
    sed &lt;span class="s1"&gt;&amp;#39;s/[^\[]*\[\([0-9]\{1,3\}%\).*\(on\|off\).*/\2 \1/&amp;#39;&lt;/span&gt; | sed &lt;span class="s1"&gt;&amp;#39;s/off/M/&amp;#39;&lt;/span&gt; | sed &lt;span class="s1"&gt;&amp;#39;s/on //&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;UNREADMAIL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;cat .unreadmail&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;BATTERYSTATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt; acpi -b | awk &lt;span class="s1"&gt;&amp;#39;{ split($5,a,&amp;quot;:&amp;quot;); print substr($3,0,2), $4, &amp;quot;[&amp;quot;a[1]&amp;quot;:&amp;quot;a[2]&amp;quot;]&amp;quot; }&amp;#39;&lt;/span&gt; | tr -d &lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;date +%S&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; 30 -o &lt;span class="sb"&gt;`&lt;/span&gt;date +%S&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; 00 &lt;span class="o"&gt;]&lt;/span&gt;; &lt;span class="k"&gt;then &lt;/span&gt;python imap_check_unread.py &amp;gt; .unreadmail; &lt;span class="k"&gt;fi&lt;/span&gt;
xsetroot -name &lt;span class="s2"&gt;&amp;quot;Unread ${UNREADMAIL} | ${VOLUME} | ${DATETIME} | Up ${UPTIME}h | ${BATTERYSTATE}&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The uptime value doesn't look perfect, there are bugs if the uptime is
&amp;lt;1h. But that doesn't bug me :)&lt;/p&gt;
&lt;p&gt;In summary, my status bar displays the following things:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Unread e-mail count&lt;/li&gt;
&lt;li&gt;Volume&lt;/li&gt;
&lt;li&gt;Date and time&lt;/li&gt;
&lt;li&gt;Uptime&lt;/li&gt;
&lt;li&gt;Battery status&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="imap-check-unread-py"&gt;
&lt;h2&gt;imap_check_unread.py&lt;/h2&gt;
&lt;p&gt;To check the unread mail count in my IMAP account, I created a little Python
script. But because I don't want to query the server every second, I'm caching
the value in a file and update it every 30 seconds. Create a cronjob or similar
to update the file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;imaplib&lt;/span&gt;

&lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;imaplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IMAP4_SSL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;xxx.xxx.xxx.xxx&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;993&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;login&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;user&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;password&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;UnSeen&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://blog.dbrgn.ch/feed.atom">
    <title type="text">dwm ssh/screen/irssi notifications</title>
    <id>http://blog.dbrgn.ch/2011/9/1/dwm-sshscreenirssi-notifications</id>
    <updated>2011-09-01T00:00:00Z</updated>
    <link href="http://blog.dbrgn.ch/2011/9/1/dwm-sshscreenirssi-notifications" />
    <author>
      <name>Danilo Bargen</name>
    </author>
    <content type="html">&lt;p&gt;I always keep an irssi session open inside a screen session on my server
via ssh. I always thought that notifications aren't possible for such a
setup. But they are.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;In your irssi session, issue the following commands:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;/set beep_msg_level NOTICE MSGS HILIGHT
/set bell_beeps OFF
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can save this configuration permanently by issueing &lt;tt class="docutils literal"&gt;/save&lt;/tt&gt;.&lt;/p&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;In your ~/.screenrc, add the following lines:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;vbell off
bell_msg &amp;#39;Bell in window %n^G&amp;#39;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;3. Tell your terminal to set the URGENT flag when beeping. Add one of
the following lines to your .Xresources:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;# For UXterm users:
UXTerm*bellIsUrgent: true

# For (u)rxvt users:
Rxvt.urgentOnBell: true
&lt;/pre&gt;&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://blog.dbrgn.ch/feed.atom">
    <title type="text">Set a Random Wallpaper from Bash</title>
    <id>http://blog.dbrgn.ch/2012/12/7/set-random-wallpaper-from-bash</id>
    <updated>2012-12-07T00:00:00Z</updated>
    <link href="http://blog.dbrgn.ch/2012/12/7/set-random-wallpaper-from-bash" />
    <author>
      <name>Danilo Bargen</name>
    </author>
    <content type="html">&lt;p&gt;Each time I start my X session, the desktop wallpaper is set in the &lt;cite&gt;.xinitrc&lt;/cite&gt;
script. Until now, it was always a single file called &lt;cite&gt;~/.xwallpaper-dwm.jpg&lt;/cite&gt;.
But today I wanted to alternate between different wallpapers instead.&lt;/p&gt;
&lt;p&gt;The following lines of code choose a random &lt;cite&gt;.jpg&lt;/cite&gt; or &lt;cite&gt;.png&lt;/cite&gt; file from my
&lt;cite&gt;~/.wallpapers/&lt;/cite&gt; directory and set it as wallpaper using &lt;cite&gt;feh&lt;/cite&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;wp_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/home/danilo/.wallpapers/
&lt;span class="nv"&gt;image&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ls &lt;span class="nv"&gt;$wp_path&lt;/span&gt; | grep -E &lt;span class="s1"&gt;&amp;#39;(jpg|png)$&amp;#39;&lt;/span&gt; | sort -R | tail -1&lt;span class="k"&gt;)&lt;/span&gt;
feh --bg-scale &lt;span class="nv"&gt;$wp_path&lt;/span&gt;/&lt;span class="nv"&gt;$image&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://blog.dbrgn.ch/feed.atom">
    <title type="text">Tips for using Ubuntu with dwm</title>
    <id>http://blog.dbrgn.ch/2010/11/16/tips-for-using-ubuntu-with-dwm</id>
    <updated>2010-11-16T00:00:00Z</updated>
    <link href="http://blog.dbrgn.ch/2010/11/16/tips-for-using-ubuntu-with-dwm" />
    <author>
      <name>Danilo Bargen</name>
    </author>
    <content type="html">&lt;p&gt;Some useful tips for using the &lt;a class="reference external" href="http://dwm.suckless.org/"&gt;dwm&lt;/a&gt; window manager on Ubuntu:&lt;/p&gt;
&lt;div class="section" id="gdm-booting"&gt;
&lt;h2&gt;GDM / Booting&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;To disable the automatic start of gdm, add &amp;quot;text&amp;quot; to the &lt;tt class="docutils literal"&gt;GRUB_CMDLINE_LINUX_DEFAULT&lt;/tt&gt;-line in
&lt;tt class="docutils literal"&gt;/etc/defaults/grub&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="network-wlan"&gt;
&lt;h2&gt;Network / WLAN&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;If you want easier network configuration, use &lt;a class="reference external" href="http://wicd.sourceforge.net/"&gt;wicd&lt;/a&gt; instead of
the &lt;a class="reference external" href="http://projects.gnome.org/NetworkManager/"&gt;gnome network manager&lt;/a&gt; (&lt;tt class="docutils literal"&gt;sudo aptitude install
&lt;span class="pre"&gt;network-manager-&lt;/span&gt; &lt;span class="pre"&gt;network-manager-gnome-&lt;/span&gt; wicd+&lt;/tt&gt;).  You can start it with &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;wicd-client&lt;/span&gt; &lt;span class="pre"&gt;-n&lt;/span&gt;&lt;/tt&gt;. Or if
you prefer console-based configuration, try &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;wicd-curses&lt;/span&gt;&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="audio-sound"&gt;
&lt;h2&gt;Audio / Sound&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;In order for the sound to work, add &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;start-pulseaudio-x11&lt;/span&gt; &amp;amp;&lt;/tt&gt; to your &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-/.xinitrc&lt;/span&gt;&lt;/tt&gt; file, add
your user to the audio group and reboot. You can configure your sound devices using &lt;tt class="docutils literal"&gt;alsamixer&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;As a replacement for your usual audio player software, you can use &lt;a class="reference external" href="http://herrie.info/"&gt;herrie&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="communication-chat"&gt;
&lt;h2&gt;Communication / Chat&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Use &lt;a class="reference external" href="http://www.centerim.org/"&gt;centerim&lt;/a&gt; or &lt;a class="reference external" href="http://www.bitlbee.org/"&gt;bitlbee&lt;/a&gt; for instant
messaging to replace pidgin. Or use &lt;a class="reference external" href="http://developer.pidgin.im/wiki/Using%20Finch"&gt;finch&lt;/a&gt;, a
console-based frontend for pidgin.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content>
  </entry>
</feed>


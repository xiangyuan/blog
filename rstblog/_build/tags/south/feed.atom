<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="text">Recent Blog Posts</title>
  <id>http://blog.dbrgn.ch/feed.atom</id>
  <updated>2012-07-08T00:00:00Z</updated>
  <link href="http://blog.dbrgn.ch/" />
  <link href="http://blog.dbrgn.ch/feed.atom" rel="self" />
  <subtitle type="text">Recent blog posts</subtitle>
  <generator>Werkzeug</generator>
  <entry xml:base="http://blog.dbrgn.ch/feed.atom">
    <title type="text">Marking South migrations as new</title>
    <id>http://blog.dbrgn.ch/2012/7/8/marking-south-migrations-as-new</id>
    <updated>2012-07-08T00:00:00Z</updated>
    <link href="http://blog.dbrgn.ch/2012/7/8/marking-south-migrations-as-new" />
    <author>
      <name>Danilo Bargen</name>
    </author>
    <content type="html">&lt;p&gt;Sometimes you might get to the point where you accidentally faked all &lt;a class="reference external" href="http://south.aeracode.org/"&gt;South&lt;/a&gt; migrations for a specific app using the
&lt;tt class="docutils literal"&gt;‑‑fake&lt;/tt&gt; option, but the database is missing the last change.&lt;/p&gt;
&lt;p&gt;In my case, I faked three migrations, but the database state was still at 0002.
If you list the migrations, however, all migrations are marked as run.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ ./manage.py migrate cmsplugin_mailchimp --list

 cmsplugin_mailchimp
  (*) 0001_initial
  (*) 0002_thankyou_field
  (*) 0003_redirect_url
&lt;/pre&gt;
&lt;p&gt;So what you want to do here is to mark the 0003 migration as new. There's no
extra option to do this, but there is a different, quite obvious solution:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ ./manage.py migrate cmsplugin_mailchimp 0002 --fake

 - Soft matched migration 0002 to 0002_thankyou_field.
Running migrations for cmsplugin_mailchimp:
 - Migrating backwards to just after 0002_thankyou_field.
 &amp;lt; cmsplugin_mailchimp:0003_redirect_url
   (faked)

$ ./manage.py migrate cmsplugin_mailchimp --list

 cmsplugin_mailchimp
  (*) 0001_initial
  (*) 0002_thankyou_field
  ( ) 0003_redirect_url
&lt;/pre&gt;
&lt;p&gt;Now the state of South matches the state of the database, and I can actually
run the last migration:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ ./manage.py migrate cmsplugin_mailchimp

Running migrations for cmsplugin_mailchimp:
 - Migrating forwards to 0003_redirect_url.
 &amp;gt; cmsplugin_mailchimp:0003_redirect_url
 - Loading initial data for cmsplugin_mailchimp.
Installed 0 object(s) from 0 fixture(s)
&lt;/pre&gt;
</content>
  </entry>
</feed>

